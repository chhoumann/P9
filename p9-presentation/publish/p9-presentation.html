<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Christian Bager Bach Houmann Patrick Frostholm Østergaard Ivik Lau Dalgas Hostrup  @ AAU">
  <meta name="dcterms.date" content="2024-02-13">
  <title>P9 Presentation - Identifying Limitations in the ChemCam Multivariate Oxide Composition Model for Elemental Quantification in Martian Geological Samples</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="styles.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Identifying Limitations in the ChemCam Multivariate Oxide Composition Model for Elemental Quantification in Martian Geological Samples</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Christian Bager Bach Houmann<br>Patrick Frostholm Østergaard<br>Ivik Lau Dalgas Hostrup<br> @ AAU 
</div>
</div>
</div>

  <p class="date">13 Feb 2024</p>
</section>
<section>
<section id="introduction" class="title-slide slide level1 center">
<h1>Introduction</h1>
<p>Presenter: Patrick Frostholm Østergaard.</p>
</section>
<section id="a-brief-history" class="slide level2 smaller">
<h2>A Brief History</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>1970s: NASA Viking missions
<ul>
<li><em>“Is there life on Mars?”</em></li>
</ul></li>
</ul>
<div class="fragment fade-up" data-fragment-index="2">
<ul>
<li>1990s: Philosophical shift
<ul>
<li><em>“Did Mars ever have the conditions to support life as we know it?”</em></li>
</ul></li>
</ul>
</div>
<div class="fragment fade-up" data-fragment-index="3">
<ul>
<li>2004: Mars Exploration Rover mission
<ul>
<li>Discovered evidence of water</li>
</ul></li>
</ul>
</div>
<div class="fragment fade-up" data-fragment-index="4">
<ul>
<li>August 2012: Mars Science Laboratory
<ul>
<li>Curiosity rover</li>
</ul></li>
</ul>
</div>
<div class="fragment fade-up" data-fragment-index="5">
<ul>
<li>ChemCam: <strong>L</strong>aser-<strong>i</strong>nduced <strong>b</strong>reakdown <strong>s</strong>pectroscopy (<em>LIBS</em>) instrument</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="static/introduction/viking-lander.jpg" class="rounded-fig" style="width:60.0%;height:60.0%"></p>
<figcaption>Viking Lander</figcaption>
</figure>
</div>
<div class="fragment fade-up" data-fragment-index="4">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="static/introduction/msl.jpg" class="rounded-fig" style="width:75.0%;height:75.0%"></p>
<figcaption>Mars Science Laboratory Curiosity Rover</figcaption>
</figure>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>In the 1970s, the NASA Viking mission was the first to land a spacecraft on Mars.<br> Goal: Is there life on Mars?<br> Experiments showed positive results, but the results were inconclusive and were not repeated due to budget constraints.</p>
<p>1990s: Philosophical shift within NASA: “Is there life on Mars?” to “Did Mars ever have the conditions to support life as we know it?”</p>
<p>In 2004, the Mars Exploration Rover mission landed the rovers Spirit and Opportunity on Mars, which quickly discovered evidence of water on Mars.</p>
<p>A few years later in 2012, the Mars Science Laboratory (MSL) mission landed the Curiosity rover on Mars.<br> This is the rover that we concern ourselves with in this project.<br> Rover is equipped with a suite of instruments to study the Martian climate and geology and to search for organic material.</p>
<p>One of the instruments is the Chemistry and Camera (ChemCam) instrument, a laser-induced breakdown spectroscopy (LIBS) instrument that can analyze the elemental composition of rocks and soil from a distance.<br> In very simple terms, the instrument shoots a laser at a rock, and the light emitted by the rock is then captured by spectrometers as a spectrum, which can be used to determine the composition of the rock.<br> This requires the development of machine learning models to analyze the data, which is the focus of this presentation.<br> Specifically, this type of problem is a supervised learning, multivariate regression problem.<br> It is supervised because we have labeled data, and it is multivariate because we are predicting multiple outputs.<br> NASA has made most of the ChemCam calibration data publicly available, and they have also published a few papers on the machine learning models they have developed for ChemCam.<br> We have worked with one of the authors of these papers, Jens Frydenvang, who asserted that the current model is far from perfect and that there is room for improvement.<br> Following this, we have decided to replicate and identify limitations in their work, which is the focus of our pre-thesis project.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="problem-definition" class="slide level2 smaller">
<h2>Problem Definition</h2>
<div class="columns" style="display: flex !important; height: 70%;">
<div class="column" style="width:50%;">
<ul>
<li>Current model: <strong>M</strong>ultivariate <strong>O</strong>xide <strong>C</strong>omposition (<em>MOC</em>)</li>
</ul>
<div class="fragment fade-up">
<ul>
<li>Predicts composition from <strong>C</strong>lean, <strong>c</strong>alibrated <strong>s</strong>pectra (<em>CCS</em>)</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li><strong>Goal</strong>: Identify components contributing most to error <span class="math inline">\(E(M)\)</span> as defined by RMSE</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li><strong>Method</strong>: Replicate MOC model and perform experiments</li>
</ul>
</div>
</div><div class="column" style="display: flex; justify-content: center; align-items: center;">
<p><img data-src="static/introduction/pipeline.png" style="width:65.0%;height:65.0%"></p>
</div>
</div>
<div class="fragment fade-up">
<div style="border: 2px solid black; padding: 0px 15px;">
<p><strong>Problem</strong>: Given a series of experiments and the resulting models, identify the components that contribute the most to the overall error <span class="math inline">\(E(M)\)</span>.</p>
</div>
</div>
<aside class="notes">
<p>The model currently used by the ChemCam team is the Multivariate Oxide Composition (MOC) model, illustrated in the figure on the right.</p>
<p>The MOC model is trained on a calibration dataset of clean, calibrated spectra (CCS), which I will give an overview of in a moment.<br> When a new spectrum is collected on Mars, it is first preprocessed into the CCS format and then fed into the MOC model to predict the composition of the sample.<br> Christian will elaborate on how exactly the MOC model works later in the presentation.</p>
<p>Our goal was to replicate the MOC model and perform experiments to identify the components that contribute the most to the overall error <span class="math inline">\(E(M)\)</span>, as defined by the root mean squared error (RMSE).</p>
<p>We do this through a series of experiments, which Ivik will explain in more detail later in the presentation.</p>
<p>By doing this, we hope to gain a better understanding of the MOC model and to identify areas where it can be improved.<br> Later on in the presentation, we will present our findings and talk about our plans for the thesis project next semester.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="related-work" class="slide level2 smaller">
<h2>Related Work</h2>
<div class="fragment fade-up">
<ul>
<li><strong><span class="citation" data-cites="takahashi_quantitative_2017">Takahashi and Thornton (<a href="#/references" role="doc-biblioref" onclick="">2017</a>)</span></strong>: ANNs for LIBS data non-linearities.</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li><strong><span class="citation" data-cites="lepore_quantitative_2022">Lepore, Ytsma, and Dyar (<a href="#/references" role="doc-biblioref" onclick="">2022</a>)</span></strong>: Full spectrum instead of sub-models often reduces RMSEP, enhancing geochemical accuracy.</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li><strong><span class="citation" data-cites="bai_application_2023">Bai et al. (<a href="#/references" role="doc-biblioref" onclick="">2023</a>)</span></strong>: Elastic net regression for Mars LIBS data and Norm 3 optimal normalization technique.</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li><strong><span class="citation" data-cites="dyar_effect_2021">Dyar and Ytsma (<a href="#/references" role="doc-biblioref" onclick="">2021</a>)</span></strong>: Larger LIBS training sets improve geochemical quantification accuracy.</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li><strong><span class="citation" data-cites="castorena_deep_2021">Castorena et al. (<a href="#/references" role="doc-biblioref" onclick="">2021</a>)</span></strong>: Developed a real-time, efficient deep spectral CNN for LIBS.</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li><strong><span class="citation" data-cites="chen_xgboost_2016">Chen and Guestrin (<a href="#/references" role="doc-biblioref" onclick="">2016</a>)</span></strong> presented XGBoost, a gradient boosting system.</li>
<li><strong><span class="citation" data-cites="andersonPostlandingMajorElement2022">Anderson et al. (<a href="#/references" role="doc-biblioref" onclick="">2022</a>)</span></strong> found GBR performed well for SuperCam calibration data.</li>
</ul>
</div>
<aside class="notes">
<p>I will briefly summarize the key aspects of our related work section from our report.</p>
<p>First, <span class="citation" data-cites="takahashi_quantitative_2017">Takahashi and Thornton (<a href="#/references" role="doc-biblioref" onclick="">2017</a>)</span> applied artificial neural networks (ANNs) to LIBS data and found that ANNs showed potential since they are able to learn the non-linear relationship between the LIBS spectra and the composition of the sample.<br> This has inspired one of our experiments, as we compared the performance the MOC model with an ANN model.</p>
<p><span class="citation" data-cites="lepore_quantitative_2022">Lepore, Ytsma, and Dyar (<a href="#/references" role="doc-biblioref" onclick="">2022</a>)</span> examined how dividing LIBS spectra into sub-models impacts the prediction of major element compositions.<br> Their findings suggest that using the entire spectrum instead of sub-models often reduces the error and enhances geochemical accuracy.<br> This is interesting considering that sub-models were introduced to the MOC model to improve its performance, which contradicts the findings of this paper.</p>
<p><span class="citation" data-cites="bai_application_2023">Bai et al. (<a href="#/references" role="doc-biblioref" onclick="">2023</a>)</span> explored elastic net regression for Mars LIBS data and found it quite efficient, however perhaps more interestingly, they found that the Norm 3 normalization technique was the optimal normalization technique for their context.<br> This is one of the two normalization techniques used to preprocess the CCS data, and this find is something we considered when performing our experiments.</p>
<p><span class="citation" data-cites="dyar_effect_2021">Dyar and Ytsma (<a href="#/references" role="doc-biblioref" onclick="">2021</a>)</span> found that accuracy in geochemical quantification with LIBS improves as the training set size increases.<br> This is expected and tells us that we should aim to use as much data as possible when training our models.</p>
<p><span class="citation" data-cites="castorena_deep_2021">Castorena et al. (<a href="#/references" role="doc-biblioref" onclick="">2021</a>)</span> developed a real-time, efficient deep spectral CNN for LIBS.<br> While we did not have time to experiment with CNNs this semester, this is something we might consider in the future.</p>
<p>Finally, <span class="citation" data-cites="chen_xgboost_2016">Chen and Guestrin (<a href="#/references" role="doc-biblioref" onclick="">2016</a>)</span> presented XGBoost, which is a gradient boosting system that has become popular among data scientists for its performance in diverse machine learning applications.<br> Interestingly, <span class="citation" data-cites="andersonPostlandingMajorElement2022">Anderson et al. (<a href="#/references" role="doc-biblioref" onclick="">2022</a>)</span> found that Gradient Boosting Regression (GBR) performed well in predicting major oxides for SuperCam, which is ChemCam’s successor.<br> This is why we chose to include XGBoost in our experiments, as it is a popular and effective implementation of GBR.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="calibration-data" class="slide level2 smaller">
<h2>Calibration Data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>408 pressed powder samples
<ul>
<li>5 locations per sample</li>
<li>50 shots location</li>
<li>3 spectrometers</li>
</ul></li>
</ul>
<div class="fragment fade-up" data-fragment-index="2">
<ul>
<li>Grouped into folders:
<ul>
<li>Each folder corresponds to a sample</li>
</ul></li>
</ul>
</div>
<div class="fragment fade-up" data-fragment-index="3">
<ul>
<li>Spectrum for cadillac
<ul>
<li>x-axis: wavelength</li>
<li>y-axis: intensity</li>
<li>Some regions masked</li>
</ul></li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment fade-up" data-fragment-index="2">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="static/introduction/folder-structure.png" style="width:35.0%;height:35.0%"></p>
</figure>
</div>
</div>
<div class="fragment fade-up" data-fragment-index="3">
<p><img data-src="static/introduction/spectrum.png"></p>
</div>
</div>
</div>
<aside class="notes">
<p>Now we will take a closer look at data that we have worked with this semester.<br> First, we have the calibration dataset, which consists of 408 pressed powder samples.<br> Each sample was shot at 5 different locations, and 50 shots were taken at each location.<br> The emitted light for each shot is then captured by 3 different spectrometers, each designed to analyze specific portions of the light spectrum.</p>
<p>The data is grouped into folders where each folder corresponds to a sample.<br> Each folder contains a .csv file for each location, and each .csv file contains the spectra for the 3 spectrometers.<br> This is what we refer to as the CCS data.</p>
<p>An example of a spectrum is shown in the figure on the right.<br> The x-axis represents the wavelength, and the y-axis represents the intensity of the light at each wavelength.<br> As you can see, there are some regions of the spectrum that are masked out.<br> This masking is part of the preprocessing of the CCS data, which is something we will talk more about later in the presentation.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="composition-data" class="slide level2 smaller">
<h2>Composition Data</h2>
<ul>
<li><p>8 major oxides: <span class="math inline">\(\text{SiO}_2\)</span>, <span class="math inline">\(\text{TiO}_2\)</span>, <span class="math inline">\(\text{Al}_2\text{O}_3\)</span>, <span class="math inline">\(\text{Fe}_2\text{O}_3\)</span>, <span class="math inline">\(\text{MgO}\)</span>, <span class="math inline">\(\text{CaO}\)</span>, <span class="math inline">\(\text{Na}_2\text{O}\)</span>, <span class="math inline">\(\text{K}_2\text{O}\)</span></p></li>
<li><p>For each sample, we know the composition weight percentage (wt. %)</p></li>
</ul>
<div class="fragment fade-up">
<ul>
<li>Composition data is used to train the MOC model<br>
</li>
</ul>
<div style="font-size: 0.7em; padding-bottom: 20px;">
<table style="width:100%;">
<colgroup>
<col style="width: 8%">
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th>Target</th>
<th>Spectrum<br>Name</th>
<th>Sample<br>Name</th>
<th>SiO2</th>
<th>TiO2</th>
<th>Al2O3</th>
<th>FeOT</th>
<th>MnO</th>
<th>MgO</th>
<th>CaO</th>
<th>Na2O</th>
<th>K2O</th>
<th>MOC total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AGV2</td>
<td>AGV2</td>
<td>AGV2</td>
<td>59.3</td>
<td>1.05</td>
<td>16.91</td>
<td>6.02</td>
<td>0.099</td>
<td>1.79</td>
<td>5.2</td>
<td>4.19</td>
<td>2.88</td>
<td>97.44</td>
</tr>
<tr class="even">
<td>BCR-2</td>
<td>BCR2</td>
<td>BCR2</td>
<td>54.1</td>
<td>2.26</td>
<td>13.5</td>
<td>12.42</td>
<td>0.2</td>
<td>3.59</td>
<td>7.12</td>
<td>3.16</td>
<td>1.79</td>
<td>98.14</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>TB</td>
<td>—</td>
<td>—</td>
<td>60.23</td>
<td>0.93</td>
<td>20.64</td>
<td>11.6387</td>
<td>0.052</td>
<td>1.93</td>
<td>0.000031</td>
<td>1.32</td>
<td>3.87</td>
<td>100.610731</td>
</tr>
<tr class="odd">
<td>TB2</td>
<td>—</td>
<td>—</td>
<td>60.4</td>
<td>0.93</td>
<td>20.5</td>
<td>11.6536</td>
<td>0.047</td>
<td>1.86</td>
<td>0.2</td>
<td>1.29</td>
<td>3.86</td>
<td>100.7406</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Uncertainties:
<ul>
<li>Presence of other elements</li>
<li>Measurement uncertainties</li>
</ul></li>
</ul>
</div>
<aside class="notes">
<p>Next, we have the composition data, which is our ground truth.<br> It contains 8 major oxides: <span class="math inline">\(\text{SiO}_2\)</span>, <span class="math inline">\(\text{TiO}_2\)</span>, <span class="math inline">\(\text{Al}_2\text{O}_3\)</span>, <span class="math inline">\(\text{Fe}_2\text{O}_3\)</span>, <span class="math inline">\(\text{MgO}\)</span>, <span class="math inline">\(\text{CaO}\)</span>, <span class="math inline">\(\text{Na}_2\text{O}\)</span>, and <span class="math inline">\(\text{K}_2\text{O}\)</span>.<br> For each sample in the calibration dataset, we know the composition weight percentage of each of these oxides.<br> This data is used to train the MOC model.<br></p>
<p>This table here shows an excerpt of the composition data for a few samples.<br> You can see that we know the composition of each sample in terms of the weight percentage of each of the major oxides.<br> The last column is the total weight percentage of the oxides, which should in theory sum to 100%.<br> However, as you can see, the total percentages might not always add up to exactly 100%, occasionally even exceeding it.<br> This discrepancy arises from two main factors.</p>
<p>Firstly, the samples often contain additional elements beyond the major oxides we focus on, which can result in a total below 100%.<br> Secondly, the inherent uncertainties in experimental measurements can cause the sum to vary, causing the total to etiher fall below or exceed 100%.<br></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="correlations" class="slide level2 smaller">
<h2>Correlations</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="static/introduction/oxide_corr.png" style="width:80.0%;height:80.0%"></p>
</figure>
</div>
<ul>
<li>Pearson correlation coefficient</li>
</ul>
<div class="fragment fade-up">
<ul>
<li>Some strong correlations
<ul>
<li>For example <span class="math inline">\(\text{SiO}_2\)</span> and <span class="math inline">\(\text{CaO}\)</span></li>
</ul></li>
</ul>
</div>
<aside class="notes">
<p>This figure here shows the correlation between the different oxides as a heatmap.<br> The correlation is calculated using the Pearson correlation coefficient, and you can see that there are some strong correlations between some of the oxides.<br></p>
<p>For example, <span class="math inline">\(\text{SiO}_2\)</span> and <span class="math inline">\(\text{CaO}\)</span> are strongly negatively correlated, indicating that when the weight percentage of one of these oxides increases, the weight percentage of the other decreases.<br> So that was the data we used to train our models, and now Christian will talk about the models themselves.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="moc-pipeline-replica" class="title-slide slide level1 center">
<h1>MOC Pipeline Replica</h1>
<p>Presenter: Christian Bager Bach Houmann.</p>
<aside class="notes">
<p>My name is Christian, and I’ll be presenting our replica of the MOC pipeline.<br> This is what we used to establish baselines for our experiments.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="moc-pipeline" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">MOC Pipeline</h2>
<div style="width=100%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./static/methodology/pipeline.png" style="width:35.0%"></p>
</figure>
</div>
</div>
<div class="fragment" data-id="moc-box">
<div style="position: absolute; top: 34.45%; left: 30.5%; width: 18%; height: 35.25%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;">

</div>
</div>
<div class="fragment" data-id="moc-box">
<div style="position: absolute; top: 34.45%; left: 51.25%; width: 18%; height: 35.25%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;">

</div>
</div>
<aside class="notes">
<p>This is the entire MOC pipeline at inference-time.<br> <br> We have attempted to replicate this pipeline as faithfully as we could, but have had to make some design choices that differ from the original — mostly due to a lack of information regarding some aspects of the original design.<br> <br> It’s important to keep in mind that this pipeline is for multivariate regression.<br> That means we create predictions for each of 8 major oxides.<br> However, most of the steps actually involve data being processed for each oxide individually.<br> For both ICA and PLS, you can imagine that after some preprocessing steps, we branch out into 8 branches, each of which predict its own values for its associated oxide.<br> And in the end, we put the outputs together to produce the MOC prediction.<br> <br> I start by walking through the PLS-SM side, and then the ICA side.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<!-- ## PLS-SM 
- Recreating the PLS-SM method presented by @cleggRecalibrationMarsScience2017 and @andersonImprovedAccuracyQuantitative2017
    - Preprocessing
    - Outlier removal
    - Training
    - Inference via submodels

::: {.notes}
Starting with the PLS-SM method, we have attempted to recreate the system presented by both Clegg and Anderson et al.
::: -->
</section>
<section id="pls-sm-motivation" class="slide level2 unlisted" data-auto-animate="true">
<h2 data-id="quarto-animate-title">PLS-SM Motivation</h2>
<ul>
<li><strong>PLS</strong>
<ul>
<li>Good for chemometrics</li>
<li>Readily intrepretable</li>
</ul></li>
</ul>
<aside class="notes">
<p>Let me start by explaining what motivated PLS-SM, because that will help us understand why it does what it does.<br> <br> First: they chose PLS because it can handle noisy data with far more variables than observations, and with significant correlation between variables.<br> It’s also readily intrepretable by plotting the regression coefficients as a function of the spectral channels. This shows which wavelength ranges show correlations with the prediction composition.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="pls-sm-motivation-1" class="slide level2 unlisted" data-auto-animate="true">
<h2 data-id="quarto-animate-title">PLS-SM Motivation</h2>
<ul>
<li>PLS</li>
<li><strong>PLS2 vs.&nbsp;PLS1</strong>
<ul>
<li>PLS2: Multivariate</li>
<li>PLS1: Univariate</li>
<li>Better results with separate PLS1 models</li>
</ul></li>
</ul>
<aside class="notes">
<p>For the original ChemCam calibration, the team used PLS2. This case corresponds to the case where there are several dependent variables, meaning it can perform multivariate predictions.<br> <br> However, they achieved better results by using a separate PLS1 model for each of the major oxides.<br> <br> PLS1 is the case where there’s only a single dependent variable — so it’s for univariate regression.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="pls-sm-motivation-2" class="slide level2 unlisted" data-auto-animate="true">
<h2 data-id="quarto-animate-title">PLS-SM Motivation</h2>
<ul>
<li>PLS</li>
<li>PLS2 vs.&nbsp;PLS1</li>
<li><strong>Submodels</strong>
<ul>
<li>More accurate when focusing on specific concentration ranges</li>
<li>Single regression model: good general performance, worse on some individual samples</li>
<li>So combine several models trained on subsets of the full compositional range</li>
</ul></li>
</ul>
<aside class="notes">
<p><strong>OK. So why submodels?</strong><br> <br> Different parts of the LIBS spectrum react differently to varying amounts of elements in the sample.<br> So, a spectrum from a sample with a medium amount of an element might show patterns that aren’t there when there’s a very high or low amount of that element.<br> This can be because when there’s too much of an element, it can overshadow its own signal, and the presence of other elements can also change the response.<br> <br> Using sub-models lets them focus on specific concentration ranges for more accurate readings.<br> <br> It’s hard for a single regression model to account for these variations. It often makes a tradeoff where it has good general performance, but performance worse on some samples. And specialist models (trained on a restricted range) will do good for that range, but much worse outside the range than a model trained on the full set.<br> <br> So the solution was to combine several regression models trained on subsets of the full compositional range to improve overall performance across the full range, which overcomes the limitations of a single model, and then combine the results via blending.<br> <br> In this case, they created 3 overlapping submodels for most of the major oxides (low, mid, high), and a full model training on the full compositional range.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="compositional-ranges" class="slide level2 unlisted">
<h2>Compositional Ranges</h2>
<table>
<thead>
<tr class="header">
<th>Oxide</th>
<th>Full</th>
<th>Low</th>
<th>Mid</th>
<th>High</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SiO2</td>
<td>(0, 100)</td>
<td>(0, 50)</td>
<td>(30, 70)</td>
<td>(60, 100)</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td>(0, 100)</td>
<td>(0, 2)</td>
<td>(1, 5)</td>
<td>(3, 100)</td>
</tr>
<tr class="odd">
<td>Al2O3</td>
<td>(0, 100)</td>
<td>(0, 12)</td>
<td>(10, 25)</td>
<td>(20, 100)</td>
</tr>
<tr class="even">
<td>FeOT</td>
<td>(0, 100)</td>
<td>(0, 15)</td>
<td>(5, 25)</td>
<td>(15, 100)</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td>(0, 100)</td>
<td>(0, 3.5)</td>
<td>(0, 20)</td>
<td>(8, 100)</td>
</tr>
<tr class="even">
<td>CaO</td>
<td>(0, 42)</td>
<td>(0, 7)</td>
<td>(0, 15)</td>
<td>(30, 100)</td>
</tr>
<tr class="odd">
<td>Na2O</td>
<td>(0, 100)</td>
<td>(0, 4)</td>
<td><em>N/A</em></td>
<td>(3.5, 100)</td>
</tr>
<tr class="even">
<td>K2O</td>
<td>(0, 100)</td>
<td>(0, 2)</td>
<td><em>N/A</em></td>
<td>(1.5, 100)</td>
</tr>
</tbody>
</table>
<div class="footer">
<p>All submodel PLS configurations are taken from <span class="citation" data-cites="cleggRecalibrationMarsScience2017">Clegg et al. (<a href="#/references" role="doc-biblioref" onclick="">2017</a>)</span>.</p>
</div>
<aside class="notes">
<p>These are the compositional ranges that <span class="citation" data-cites="cleggRecalibrationMarsScience2017">Clegg et al. (<a href="#/references" role="doc-biblioref" onclick="">2017</a>)</span> presented in their paper.<br> <br> As can be seen, the ranges overlap.<br> This is to avoid discontinuities in the final combined results.<br> They would occur because the samples in each sub-model with the most “extreme” compositions aren’t necessarily weighted as strongly when the model is trained, so may be less accurately predicted.<br> <br> The N/As here mean that there are no compositional ranges defined there.<br> Essentially meaning there are no Mid submodels for sodium and potassium oxide.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="pls-sm-inference" class="slide level2 unlisted">
<h2>PLS-SM Inference</h2>

<img data-src="./static/methodology/pls_inference.png" style="width:70.0%" class="r-stretch quarto-figure-center"><aside class="notes">
<p>Let me illustrate.<br> <br> <!-- I'm starting out by showing you how the model makes predictions, because that is the simplest view to start from.<br>
<br> --> It’s important to understand that, in practice, this flow is executed for each oxide.<br> For simplicity’s sake, we present it as being done wholly.<br> <br> The full model is used to estimate the composition of an unknown target, and the appropriate sub-model(s) is then chosen based on this estimate for a more accurate prediction.<br> <br> If the initial estimate falls within the the range of only a single model, we use the full prediction from that model.<br> Conversely, if the estimate falls within an overlapping range (blending range), we blend the predictions of the corresponding submodels such that the prediction is weighted favoring the submodel whose range the initial estimate is closest to.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="preprocessing" class="slide level2 unlisted smaller" data-auto-animate="true" data-auto-animate-id="p1" data-transition="slide-in fade-out">
<h2 data-id="quarto-animate-title">Preprocessing</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Remove ‘dust’ shots</li>
<li>Average shot intensities</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="position: relative;">
<figure>
<p><img data-src="static/methodology/pls_preprocessing.png" data-top="-400px" data-id="x1"></p>
<figcaption>PLS Preprocessing</figcaption>
</figure>
</div>
<div style="position: absolute; top: 25%; left: 55%; width: 38%; height: 50%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;">

</div>
</div>
</div>
<aside class="notes">
<p>The initial preprocessing step is to remove the first five shots.<br> These shots usually serve to remove dust from samples, and are therefore often less informative than the remaining shots: the dust doesn’t say much about what’s in the sample.<br> <br> Then we proceed to averaging the shot intensity values for each wavelength.<br> The final result is a single column representing an intensity value for each wavelength.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="preprocessing-1" class="slide level2 unlisted smaller" data-auto-animate="true" data-auto-animate-id="p1" data-transition="slide-in fade-out">
<h2 data-id="quarto-animate-title">Preprocessing</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Remove ‘dust’ shots</li>
<li>Average shot intensities</li>
<li>Mask noisy wavelenghts</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="position: relative; top: -400px;">
<figure>
<p><img data-src="static/methodology/pls_preprocessing.png" data-id="x1"></p>
<figcaption>PLS Preprocessing</figcaption>
</figure>
</div>
<div style="position: absolute; top: 25%; left: 55%; width: 38%; height: 50%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;" data-id="pbox">

</div>
</div>
</div>
<aside class="notes">
<p>The preprocessing continues by masking noisy wavelengths.<br> The masking process itself simply involves setting the intensity values for the wavelengths in the masking ranges to zero.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="preprocessing-2" class="slide level2 unlisted smaller" data-auto-animate="true" data-auto-animate-id="p1" data-transition="slide-in fade-out">
<h2 data-id="quarto-animate-title">Preprocessing</h2>

<img data-src="./static/methodology/masked_regions.png" class="r-stretch quarto-figure-center"><aside class="notes">
<p>As we see here, the mask regions are placed at the edges of the spectrometer ranges.<br> This is because they were found to be untrustworthy &amp; to generate outliers in the intensity values.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="preprocessing-3" class="slide level2 unlisted smaller" data-auto-animate="true" data-auto-animate-id="p1" data-transition="slide-in fade-out">
<h2 data-id="quarto-animate-title">Preprocessing</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Remove ‘dust’ shots</li>
<li>Average shot intensities</li>
<li>Mask noisy wavelenghts</li>
<li>Zero out negative values</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="position: relative; top: -400px;">
<figure>
<p><img data-src="static/methodology/pls_preprocessing.png" data-id="x1"></p>
<figcaption>PLS Preprocessing</figcaption>
</figure>
</div>
<div style="position: absolute; top: 25%; left: 55%; width: 38%; height: 50%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px; border-radius: 10px;" data-id="pbox">

</div>
</div>
</div>
<aside class="notes">
<p>After we’ve masked, we proceed to set negative values to zero.<br> These negative values represent noise that stems from the pre-CCS preprocessing phase — likely the continuum removal step.<br> <br> Removing the values would imply we don’t know what they mean, but we do.<br> They represent noise, so we set them to zero.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="preprocessing-4" class="slide level2 unlisted smaller" data-auto-animate="true" data-auto-animate-id="p1" data-transition="slide-in fade-out">
<h2 data-id="quarto-animate-title">Preprocessing</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Remove ‘dust’ shots</li>
<li>Average shot intensities</li>
<li>Mask noisy wavelenghts</li>
<li>Zero out negative values</li>
<li>Tranpose</li>
<li>Submodels filter</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="position: relative; top:-800px;">
<figure>
<p><img data-src="static/methodology/pls_preprocessing.png" data-id="x1"></p>
<figcaption>PLS Preprocessing</figcaption>
</figure>
</div>
<div style="position: absolute; top: 25%; left: 55%; width: 38%; height: 57%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;" data-id="pbox">

</div>
</div>
</div>
<aside class="notes">
<p>We transpose the data, meaning the wavelengths are now the columns and the rows are the averaged sample location intensity values for the given wavelengths.<br> Essentially, this means we have 5 locations per samples times 408 samples, giving us 2040 rows.<br> Of course, in practice, we divide the data into five folds, where one represents the test set.<br> <br> We now filter the data.<br> At this point, as illustrated in the figure, we process the data for each oxide.<br> So for each oxide, we filter it by the compositional range associated with a given submodel.<br> This gives us the training data for this model’s compositional range.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="preprocessing-5" class="slide level2 unlisted smaller" data-auto-animate="true" data-auto-animate-id="p1" data-transition="slide-in fade-out">
<h2 data-id="quarto-animate-title">Preprocessing</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Remove ‘dust’ shots</li>
<li>Average shot intensities</li>
<li>Mask noisy wavelenghts</li>
<li>Zero out negative values</li>
<li>Tranpose</li>
<li>Submodels filter</li>
<li>Normalize
<ul>
<li>Norm 1: <em>normalize full spectrum,</em> <span class="math inline">\(\text{sum}=1\)</span></li>
<li>Norm 3: <em>normalize per spectrometer,</em> <span class="math inline">\(\text{sum}=3\)</span></li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="position: relative; top:-1200px;">
<figure>
<p><img data-src="static/methodology/pls_preprocessing.png" data-id="x1"></p>
<figcaption>PLS Preprocessing</figcaption>
</figure>
</div>
<div style="position: absolute; top: 25%; left: 55%; width: 38%; height: 45%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;" data-id="pbox">

</div>
</div>
</div>
<aside class="notes">
<p>Now we normalize.<br> <br> <strong>Norm 1</strong> normalizes full spectrum by total across the total across all three spectrometers, so the resulting spectrum adds up to 1.<br> <br> <strong>Norm 3</strong> normalizes on a per-spectrometer basis, resulting in a full normalized spectrum adds up to 3 (because there are 3 separate spectrometers…).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="training-phase" class="slide level2 unlisted">
<h2>Training Phase</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Outlier removal</li>
<li>Each model trained on subset of data</li>
<li>Cross validated</li>
<li>Train on all training folds &amp; evaluate</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./static/methodology/pls_training.png" style="width:50.0%"></p>
<figcaption>PLS Training</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="outlier-removal" class="slide level2 unlisted">
<h2>Outlier Removal</h2>
<p>Iterative, automated outlier removal process using Influence Plots of Leverage and Spectral Residuals</p>
<div width="100%">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./static/methodology/FeOT_Full_5.png" style="width:70.0%"></p>
</figure>
</div>
</div>
<aside class="notes">
<p>The outlier removal process is iterative and works using influence plots of leverage and spectral residuals.<br> It is iterative because removing spectra that appear as outliers can reveal additional outliers.<br></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="outlier-removal-1" class="slide level2 unlisted">
<h2>Outlier Removal</h2>
<div>
<ol type="1">
<li class="fragment">Compute leverage &amp; spectral residuals</li>
<li class="fragment">Calculate Mahalanobis distance <span class="math inline">\(d\)</span></li>
<li class="fragment">Get critical value <span class="math inline">\(c\)</span></li>
<li class="fragment">Classify sample as outlier if <span class="math inline">\(d&gt;c\)</span></li>
<li class="fragment">Remove outliers &amp; train new model</li>
<li class="fragment">Repeat until model performance ceases to improve</li>
</ol>
</div>
<aside class="notes">
<p>We decided to automate this process, whereas the original authors would manually select outliers based on their expertise.<br> <br> The process itself follows the steps seen here.<br> <br> First we calculate the leverage and spectral residuals from the scores and loadings of a PLS model.<br> <br> <!-- Leverage is a measure of how far the independent variable values of an observation are from other observations. High-leverage points are outliers w.r.t the independent variables, as they have no neighboring points in space.<br>
<br>
Spectral residuals measure how well a given spectrum is explained by the model. --> Then we calculate the Mahalanobis distance for each point in a matrix of the combined leverage and spectral residuals.<br> <br> We obtain a critical value that is based on a chi-square distribution for a 97.5% confidence interval given 2 degrees of freedom.<br> <br> We compare the distances against this critical value, using it as a threshold, where distances above this threshold are classified as outliers.<br> <br> Then we remove outliers from the dataset, retrain a PLS model, and then repeat the process.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="outlier-removal-2" class="slide level2 unlisted">
<h2>Outlier Removal</h2>
<div class="r-stack">
<p><img data-src="./static/methodology/FeOT_Full_1.png"></p>
<p><img data-src="./static/methodology/FeOT_Full_2.png" class="fragment" data-fragment-index="1"></p>
<p><img data-src="./static/methodology/FeOT_Full_3.png" class="fragment" data-fragment-index="2"></p>
<p><img data-src="./static/methodology/FeOT_Full_4.png" class="fragment" data-fragment-index="3"></p>
<p><img data-src="./static/methodology/FeOT_Full_5.png" class="fragment" data-fragment-index="4"></p>
</div>
<aside class="notes">
<p>The process itself is easily seen as we step through these influence plots.<br> <br> As you can see, data points with both a high error and leverage are classified as outliers and are promptly removed.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="moc-pipeline-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">MOC Pipeline</h2>
<div style="width=100%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./static/methodology/pipeline.png" style="width:35.0%"></p>
</figure>
</div>
</div>
<div data-id="moc-box">
<div style="position: absolute; top: 34.45%; left: 51.25%; width: 18%; height: 35.25%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;">

</div>
</div>
</section>
<section id="ica-preprocessing" class="slide level2">
<h2>ICA Preprocessing</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Similar preprocessing to PLS-SM, except:
<ul>
<li>No averaging</li>
<li>No compositional range filtering</li>
<li>Uses only one location per sample</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="static/methodology/ica_preprocessing.png" style="width:55.0%"></p>
<figcaption>ICA Preprocessing</figcaption>
</figure>
</div>
</div>
</div>
<aside class="notes">
<p>I won’t go into much detail about the preprocessing stage in the ICA phase.<br> The process mostly follows the same steps as in PLS-SM, except we don’t filter for any compositional ranges here.<br> <br> We also do not average the shots, and instead preserve the intensity values for each shot, except the first five.<br> <br> Finally, we don’t use all five location datasets for each sample. That is left as an experiment, which Ivik will go into detail about. We chose to do it this way because it was unclear how the original authors used all location datasets.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ica---jade" class="slide level2 unlisted">
<h2>ICA - JADE</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>ICA</li>
<li>Using JADE</li>
<li>Get estimated sources from the data</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="static/methodology/ica_jade.png" style="width:55.0%"></p>
<figcaption>JADE</figcaption>
</figure>
</div>
</div>
</div>
<aside class="notes">
<p>To actually do Independent Component Analysis (ICA), we use the JADE algorithm, just as the original authors.<br> ICA is conceptually similar to PCA in that it decomposes data to a smaller number of variables.<br> The main idea to to take some original set of data, consisting of mixed signals. <br></p>
<p>Then reconstruct these via:</p>
<ul>
<li>a mixing matrix, each column measuring how much each source contributes to the mixed signals, and</li>
<li>a matrix of independent components, called the estimated sources matrix</li>
</ul>
<p><br> The result of running JADE is the estimated sources.<br> We’ll use these in the next step, postprocessing.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ica-postprocessing" class="slide level2 unlisted">
<h2>ICA Postprocessing</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Calculate correlation between ICs and wavelengths</li>
<li>Find most correlated</li>
<li>Get composition values for samples</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="static/methodology/ica_postprocessing.png" style="width:50.0%"></p>
<figcaption>ICA Postprocessing</figcaption>
</figure>
</div>
</div>
</div>
<aside class="notes">
<p>For the postprocessing phase, we start by calculating correlations between the estimated sources from JADE and the wavelenghts.<br> Using this, we can identify which wavelengths are associated with which independent components by computing the maximum correlation for each wavelength.<br> This gives us a matrix of ICA scores that we then use for regression.<br> This finds the most relevant spectral lines for each component.<br> <br> Finally, we curate the compositions for the samples we’ve processed, which will be used to train the regression models.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ica-score-based-regression-models" class="slide level2 unlisted smaller">
<h2>ICA-Score based Regression Models</h2>

<img data-src="static/methodology/ica_regression.png" class="r-stretch quarto-figure-center"><p class="caption">a</p><aside class="notes">
<ul>
<li>We train regression models on the ICA scores and composition data</li>
<li>First, the ICA scores go through data transformation to one of the regression laws seen here</li>
<li>The regression models are then trained with the scores as inputs and composition data as targets</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="multivariate-oxide-compositions" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Multivariate Oxide Compositions</h2>
<div style="width=100%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./static/methodology/pipeline.png" style="width:35.0%"></p>
</figure>
</div>
</div>
<div style="position: absolute; top: 75.5%; left: 40.9%; width: 18%; height: 21%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;" data-id="moc-box">

</div>
<aside class="notes">
<ul>
<li>Varying weight by oxide</li>
<li>Depends on which model performs best</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="moc-pipeline-2" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">MOC Pipeline</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Oxide</th>
<th>PLS1-SM (%)</th>
<th>ICA (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Al2O3</td>
<td>75</td>
<td>25</td>
</tr>
<tr class="even">
<td>FeOT</td>
<td>75</td>
<td>25</td>
</tr>
<tr class="odd">
<td>SiO2</td>
<td>50</td>
<td>50</td>
</tr>
<tr class="even">
<td>Na2O</td>
<td>40</td>
<td>60</td>
</tr>
<tr class="odd">
<td>K2O</td>
<td>25</td>
<td>75</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td>50</td>
<td>50</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td>50</td>
<td>50</td>
</tr>
<tr class="even">
<td>CaO</td>
<td>50</td>
<td>50</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./static/methodology/pipeline.png" style="width:75.0%"></p>
</figure>
</div>
<div style="position: absolute; top: 79%; left: 65%; width: 18%; height: 21%; border: 2px solid red; box-sizing: border-box; pointer-events: none; border-radius: 10px;" data-id="moc-box">

</div>
</div>
</div>
<aside class="notes">
<p>The weights can be seen here.<br></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="differences" class="slide level2">
<h2>Differences</h2>
<div>
<ul>
<li class="fragment">We do not weighing by inverse IRF</li>
<li class="fragment">No MAD outlier removal for ICA</li>
<li class="fragment">Automated what they did manually (outlier removal PLS)</li>
<li class="fragment">Our test fold was not carefully selected to be representative (just randomized)</li>
</ul>
</div>
<aside class="notes">
<ol type="1">
<li><strong>We Do Not Weigh by Inverse IRF</strong>:
<ul>
<li><strong>Reason</strong>: Avoiding the inverse IRF weighting is based on criticism that it distorts the alignment between spectral data from different instruments. The inverse IRF could introduce more noise and disrupt the comparison between spectra collected by different instruments, one in Los Alamos and another on Mars.</li>
</ul></li>
<li><strong>No MAD Outlier Removal for ICA</strong>:
<ul>
<li><strong>Reason</strong>: The decision to omit MAD-based outlier removal in the ICA phase is due to insufficient description of the method by Clegg et al., making replication without assumptions difficult. Additionally, retaining a comprehensive dataset is preferred to ensure the integrity of analysis.</li>
</ul></li>
<li><strong>Automated Outlier Removal for PLS</strong>:</li>
<li><strong>Randomized Test Fold Selection</strong>:
<ul>
<li>This approach, while simpler, might not ensure that the test set is fully representative of the broader dataset.</li>
</ul></li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="experiments" class="title-slide slide level1 center">
<h1>Experiments</h1>
<p>Presenter: Ivik Lau Dalgas Hostrup.</p>
</section>
<section id="answering-the-problem-definition" class="slide level2 smaller">
<h2>Answering the Problem Definition</h2>
<div class="experiments-spacing">
<p class="experiments-header">
The Problem Definition:
</p>
<div class="experiments-align-center">
<p style="font-size: 30px">
<em>Given a series of experiments and the resulting models, identify the components that contribute the most to the overall error E(M)</em>
</p>
</div>
</div>
<div class="fragment fade-up">
<div class="experiments-spacing">
<p class="experiments-header">
The Challenges:
</p>
<div class="fragment fade-up">
<ul>
<li>Determine what a component is</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li>Figuring out which components to conduct experiments on</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li>Time is a contraint - which experiments are most meaningful?</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Experiments introduction</strong> <br> Once the replication process was done we had to decide on a set of experiments that would best answer our problem definition. <br> A tricky aspects of answering the problem definition is defining what constitutes a component and in turn, how to define an experiment that would allow us to determine its contribution to the over all error. <br> On top of this, was the looming time constraint for delivery on the project. This meant that we had to be selective on the type of experiments that we chose. We had to ensure that the experiments were impactful enough to be able to determine something about the pipeline.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="our-choice-of-experiments" class="slide level2">
<h2>Our Choice of Experiments</h2>
<div class="experiments-spacing">
<p class="experiments-header" style="font-size: 30px;">
Outlier based experiments
</p>
</div>
<div class="fragment fade-up">
<ol type="1">
<li>Evaluating the necessity of automated outlier removal in the PLS1-SM</li>
</ol>
</div>
<div class="fragment fade-up">
<div style="font-size: 0.5em;">
<table>
<thead>
<tr class="header">
<th>Element</th>
<th style="text-align: right;">Baseline</th>
<th style="text-align: right;">Without outlier removal</th>
<th style="text-align: right;">PLS1-SM (Clegg)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SiO2</td>
<td style="text-align: right;">5.81</td>
<td style="text-align: right;">5.81</td>
<td style="text-align: right;">4.33</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">0.94</td>
</tr>
<tr class="odd">
<td>Al2O3</td>
<td style="text-align: right;">1.94</td>
<td style="text-align: right;">1.91</td>
<td style="text-align: right;">2.85</td>
</tr>
<tr class="even">
<td>FeOT</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">2.01</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td style="text-align: right;">1.17</td>
<td style="text-align: right;">1.17</td>
<td style="text-align: right;">1.06</td>
</tr>
<tr class="even">
<td>CaO</td>
<td style="text-align: right;">1.43</td>
<td style="text-align: right;">1.44</td>
<td style="text-align: right;">2.65</td>
</tr>
<tr class="odd">
<td>Na2O</td>
<td style="text-align: right;">0.66</td>
<td style="text-align: right;">0.67</td>
<td style="text-align: right;">0.62</td>
</tr>
<tr class="even">
<td>K2O</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">0.70</td>
<td style="text-align: right;">0.72</td>
</tr>
</tbody>
</table>
</div>
</div>
<aside class="notes">
<p><strong>The experiments that we chose</strong> <br> We settled on conducting 5 sets of experiments. The first set of experiments were centered around outlier removal. In the initial stages of our implementation we realized that we would not be able to do outlier detection in the same way that Clegg et. al did it. Both in terms of the PLS side of the pipeline and also in the ICA side of the pipeline. Therefore we thought it would be interesting to conduct experiments that tested different aspects of our outlier removal process.</p>
<p><strong>(1) Automated outlier removal</strong> <br> The first experiment that we decided to conduct was to evaluate the effects of not doing outlier removal vs.&nbsp;our automated outlier removal for PLS-SM. The outcome of this experiment would provide us answers to two things. The first being an evaluation of our automated outlier removal. The second being an evaluation of the PLS model’s intrinsic ability to handle outliers.</p>
<p><strong>Table 1</strong> <br> As you can see from the table, our outlier removal had almost no effect on the RMSE. This result was surprising to us. We did not necessarily have any expectation that our outlier removal would perform better than clegg et. al’s, however, we would have expected to see more of an effect since we were removing quite a few outliers that theoretically should have a high, negative impact on the model’s predictions.<br>
The interesting result, though, is the fact that PLS performed very well without our outlier removal and in fact comparable to clegg’s results, who manually picked out outliers. This result indicates that our outlier removal is not particularly effective in terms of improving RMSE, but also that PLS is seemingly a robust method in itself. Given the fact that we did not see much improvement, and the fact that we do not have the expertise to do manual outlier removal, it would have been beneficial to have investigated other methods such as clustering-based outlier detection rather than statistical approaches like we have used.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section" class="slide level2 smaller">
<h2></h2>
<div class="experiments-spacing">
<p class="experiments-header" style="font-size: 30px;">
Outlier based experiments
</p>
</div>
<ol start="2" type="1">
<li>Investigating the effect of maintaining the leverage and residuals in the outlier removal process of PLS1-SM</li>
</ol>
<div class="fragment fade-up">
<div style="font-size: 0.6em;">
<table>
<thead>
<tr class="header">
<th>Element</th>
<th style="text-align: right;">Baseline</th>
<th style="text-align: right;">Fixed thresholds</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SiO2</td>
<td style="text-align: right;">5.81</td>
<td style="text-align: right;">5.81</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">0.47</td>
</tr>
<tr class="odd">
<td>Al2O3</td>
<td style="text-align: right;">1.94</td>
<td style="text-align: right;">1.94</td>
</tr>
<tr class="even">
<td>FeOT</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">4.35</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td style="text-align: right;">1.17</td>
<td style="text-align: right;">1.18</td>
</tr>
<tr class="even">
<td>CaO</td>
<td style="text-align: right;">1.43</td>
<td style="text-align: right;">1.44</td>
</tr>
<tr class="odd">
<td>Na2O</td>
<td style="text-align: right;">0.66</td>
<td style="text-align: right;">0.6</td>
</tr>
<tr class="even">
<td>K2O</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">0.72</td>
</tr>
</tbody>
</table>
</div>
</div>
<aside class="notes">
<p><strong>(2) Maintaining leverage and residuals</strong> <br> In order to further verify the results from the previous slide, we attempted a different approach where instead of recalculating the leverage and residuals for each iteration, we would instead maintain the ones from the second iteration. We did this to ensure that we were not being too aggressive in our outlier removal process, since this approach would result in fewer points overall being removed.</p>
<p><strong>Table 2</strong> <br> As can be seen in the table, this approach did not provide any improvements to the RMSE, either. Perhaps a more specialized outlier approach would yield greater performance of the PLS model. However, given that our results with both types of outlier removal are close to the results of Clegg et. al’s we have some evidence, although not conclusive, that the outlier removal component of the PLS phase is not a component that would provide many improvements to the overall RMSE. But as stated before, this may be different with different methods of outlier removal.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-1" class="slide level2 smaller">
<h2></h2>
<div class="experiments-spacing">
<p class="experiments-header" style="font-size: 30px;">
Outlier based experiments
</p>
</div>
<ol start="3" type="1">
<li>Assessing the impact of the MAD-based method for outlier removal in the ICA phase</li>
</ol>
<div class="fragment fade-up">
<div style="font-size: 0.6em;">
<table>
<thead>
<tr class="header">
<th>Element</th>
<th style="text-align: right;">ICA baseline</th>
<th style="text-align: right;">ICA with MAD</th>
<th style="text-align: right;">ICA (clegg)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SiO2</td>
<td style="text-align: right;">10.68</td>
<td style="text-align: right;">8.64</td>
<td style="text-align: right;">8.31</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td style="text-align: right;">0.63</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;">1.44</td>
</tr>
<tr class="odd">
<td>Al2O3</td>
<td style="text-align: right;">5.55</td>
<td style="text-align: right;">3.69</td>
<td style="text-align: right;">4.77</td>
</tr>
<tr class="even">
<td>FeOT</td>
<td style="text-align: right;">8.30</td>
<td style="text-align: right;">7.07</td>
<td style="text-align: right;">5.17</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">2.10</td>
<td style="text-align: right;">4.08</td>
</tr>
<tr class="even">
<td>CaO</td>
<td style="text-align: right;">3.52</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">3.07</td>
</tr>
<tr class="odd">
<td>Na2O</td>
<td style="text-align: right;">1.72</td>
<td style="text-align: right;">1.45</td>
<td style="text-align: right;">2.29</td>
</tr>
<tr class="even">
<td>K2O</td>
<td style="text-align: right;">1.37</td>
<td style="text-align: right;">1.15</td>
<td style="text-align: right;">0.98</td>
</tr>
</tbody>
</table>
</div>
</div>
<aside class="notes">
<p><strong>(3) Median Absolute Deviation outlier ICA</strong> <br> Moving on to our third outlier experiment, we wanted to actually implement MAD for ICA. As we mentioned in the report we were unsure where in the ICA phase they had implemented it. Therefore we chose to experiment with different placements until we found a version which we thought was most appropiate. This experiment allowed us to do a with/without outlier removal test, similar to the PLS, which tests the intrinsic robustness of the ICA model.</p>
<p><strong>Table 3</strong> <br> Looking at the results then, we see that using MAD did in fact have a pretty significant effect on the results of ICA. This told us that ICA seems quite susceptible to outliers. Additionally, since ICA is worse across all oxides compared to PLS we wonder what the benefit of ICA in this context. A recent paper related to supercam model selection seems to agree with this observation since NASA chose to exclude it in their recent model.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="our-choice-of-experiments-1" class="slide level2 smaller">
<h2>Our Choice of Experiments</h2>
<div class="experiments-spacing">
<p class="experiments-header" style="font-size: 30px;">
Aggregating datasets for ICA
</p>
</div>
<ol start="4" type="1">
<li>Determining the effect on ICA performance when aggregating datasets from five locations compared to a single dataset</li>
</ol>
<div class="columns">
<div class="column" style="width:33%;">
<div class="fragment fade-up">
<div style="font-size: 0.5em;">
<table>
<caption>ICA replica <strong>without</strong> MAD</caption>
<thead>
<tr class="header">
<th></th>
<th style="text-align: right;">1 location</th>
<th style="text-align: right;">Aggregated</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SiO2</td>
<td style="text-align: right;">10.68</td>
<td style="text-align: right;">12.01</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td style="text-align: right;">0.63</td>
<td style="text-align: right;">0.60</td>
</tr>
<tr class="odd">
<td>Al2O3</td>
<td style="text-align: right;">5.55</td>
<td style="text-align: right;">4.81</td>
</tr>
<tr class="even">
<td>FeOT</td>
<td style="text-align: right;">8.30</td>
<td style="text-align: right;">8.56</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">2.51</td>
</tr>
<tr class="even">
<td>CaO</td>
<td style="text-align: right;">3.52</td>
<td style="text-align: right;">3.71</td>
</tr>
<tr class="odd">
<td>Na2O</td>
<td style="text-align: right;">1.72</td>
<td style="text-align: right;">1.41</td>
</tr>
<tr class="even">
<td>K2O</td>
<td style="text-align: right;">1.37</td>
<td style="text-align: right;">1.51</td>
</tr>
</tbody>
</table>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="fragment fade-up">
<div style="font-size: 0.5em;">
<table>
<caption>ICA replica with MAD</caption>
<thead>
<tr class="header">
<th></th>
<th style="text-align: right;">1 location</th>
<th style="text-align: right;">Aggregated</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SiO2</td>
<td style="text-align: right;">8.64</td>
<td style="text-align: right;">9.47</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;"><strong>0.48</strong></td>
</tr>
<tr class="odd">
<td>Al2O3</td>
<td style="text-align: right;">3.69</td>
<td style="text-align: right;"><strong>2.66</strong></td>
</tr>
<tr class="even">
<td>FeOT</td>
<td style="text-align: right;">7.07</td>
<td style="text-align: right;">7.05</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td style="text-align: right;">2.10</td>
<td style="text-align: right;"><strong>2.83</strong></td>
</tr>
<tr class="even">
<td>CaO</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;"><strong>1.90</strong></td>
</tr>
<tr class="odd">
<td>Na2O</td>
<td style="text-align: right;">1.45</td>
<td style="text-align: right;"><strong>1.60</strong></td>
</tr>
<tr class="even">
<td>K2O</td>
<td style="text-align: right;">1.15</td>
<td style="text-align: right;">1.08</td>
</tr>
</tbody>
</table>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="fragment fade-up">
<div style="font-size: 0.5em;">
<table>
<caption>ICA (Clegg et. al)</caption>
<thead>
<tr class="header">
<th>Element</th>
<th style="text-align: right;">Original</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SiO2</td>
<td style="text-align: right;">8.31</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td style="text-align: right;">1.44</td>
</tr>
<tr class="odd">
<td>Al2O3</td>
<td style="text-align: right;">4.77</td>
</tr>
<tr class="even">
<td>FeOT</td>
<td style="text-align: right;">5.17</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td style="text-align: right;">4.08</td>
</tr>
<tr class="even">
<td>CaO</td>
<td style="text-align: right;">3.07</td>
</tr>
<tr class="odd">
<td>Na2O</td>
<td style="text-align: right;">2.29</td>
</tr>
<tr class="even">
<td>K2O</td>
<td style="text-align: right;">0.98</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>(4) ICA aggregated</strong> The next type experiment that we conducted was based on aggregating the datasets for a sample. In the report we mentioned being unsure how they utilized all 5 datasets for a sample in the ICA phase. Based on our understanding from the papers and through discussions with our external supervisor Jens, we identified two candidate methods of approaching this. The first being running ICA on each of the 5 datasets per sample and training the regression model on the results and the second being aggregating the 5 dataset into a single, average dataset as they do in PLS-SM. We chose the simpler second option, as we believed that averaging could help ICA more easily identify principal components, since we noticed that ICA seemed sensitive to outliers.</p>
<p><strong>Table 4.1</strong> As can be seen in the first table the results are fairly similar across all oxides, except for Silicon where the results are worse. These variations in the results across the oxides did partly confirm our suspicion, in that for some oxides the results improved which indicates that it was easier for ICA to separate out signals for those oxides. However, as the results show it may also have had the opposite effect for some oxides. One possible interpretation of this is that noise in some areas might have been increased, making it harder to separate the signals properly. This is likely due to the smoothing effect of avereging which may have made some signals less distinct and therefore harder to identify.</p>
<p><strong>Table 4.2</strong> The previous results then led us to wonder how much of an effect outlier detection would have with this aggregated dataset. We reasoned that noise would be amplified by this process and that it therefore would be easier to detect outliers. Surprisingly, there seemed to be some merit to this as there were quite a few improvements. In fact, for 5 out of 8 oxides we saw better results than clegg. This highligts two key points: First, the effectiveness of ICA seems depend on a robust outlier removal strategy, particularly with LIBS data. Second, the success of ICA seems to rely on the structure of the data. This would mean spending more effort on creating calibration data which is suitable for ICA. However, given the substantial time and resources required to generate such calibration data, the benefits of using ICA appear limited.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="our-choice-of-experiments-2" class="slide level2 smaller">
<h2>Our Choice of Experiments</h2>
<div class="experiments-spacing">
<p class="experiments-header" style="font-size: 30px">
Using different models
</p>
</div>
<ol start="5" type="1">
<li>Comparing the performance of PLS1-SM and ICA models against XGBoost and ANN.</li>
</ol>
<div class="fragment fade-up">
<div style="font-size: 0.6em;">
<table>
<colgroup>
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th style="text-align: right;">ANN (Norm1)</th>
<th style="text-align: right;">ANN (Norm3)</th>
<th style="text-align: right;">XGBoost (Norm1)</th>
<th style="text-align: right;">XGBoost (Norm3)</th>
<th style="text-align: right;">MOC (original)</th>
<th style="text-align: right;">MOC (replica)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SiO2</td>
<td style="text-align: right;">5.62</td>
<td style="text-align: right;">5.01</td>
<td style="text-align: right;">5.12</td>
<td style="text-align: right;"><strong>4.67</strong></td>
<td style="text-align: right;">5.30</td>
<td style="text-align: right;">7.29</td>
</tr>
<tr class="even">
<td>TiO2</td>
<td style="text-align: right;">0.58</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;"><strong>0.44</strong></td>
<td style="text-align: right;">0.45</td>
<td style="text-align: right;">1.03</td>
<td style="text-align: right;">0.49</td>
</tr>
<tr class="odd">
<td>Al2O3</td>
<td style="text-align: right;">2.12</td>
<td style="text-align: right;">2.27</td>
<td style="text-align: right;"><strong>1.93</strong></td>
<td style="text-align: right;">1.97</td>
<td style="text-align: right;">3.47</td>
<td style="text-align: right;">2.39</td>
</tr>
<tr class="even">
<td>FeOT</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">4.40</td>
<td style="text-align: right;">5.02</td>
<td style="text-align: right;"><strong>2.31</strong></td>
<td style="text-align: right;">5.21</td>
</tr>
<tr class="odd">
<td>MgO</td>
<td style="text-align: right;">1.61</td>
<td style="text-align: right;">1.49</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;"><strong>0.96</strong></td>
<td style="text-align: right;">2.21</td>
<td style="text-align: right;">1.67</td>
</tr>
<tr class="even">
<td>CaO</td>
<td style="text-align: right;">1.33</td>
<td style="text-align: right;">1.26</td>
<td style="text-align: right;"><strong>1.23</strong></td>
<td style="text-align: right;">1.26</td>
<td style="text-align: right;">2.72</td>
<td style="text-align: right;">1.81</td>
</tr>
<tr class="odd">
<td>Na2O</td>
<td style="text-align: right;">1.17</td>
<td style="text-align: right;">1.09</td>
<td style="text-align: right;"><strong>0.49</strong></td>
<td style="text-align: right;">0.51</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;">1.10</td>
</tr>
<tr class="even">
<td>K2O</td>
<td style="text-align: right;">1.05</td>
<td style="text-align: right;">0.88</td>
<td style="text-align: right;"><strong>0.50</strong></td>
<td style="text-align: right;">0.51</td>
<td style="text-align: right;">0.82</td>
<td style="text-align: right;">1.09</td>
</tr>
</tbody>
</table>
</div>
</div>
<aside class="notes">
<p>The final experiments that we wanted to do was based on the desire to do some due diligence that we felt was lacking from clegg’s paper. This was comparing the MOC pipeline to other methods that exist. For this we chose to work with XGBoost and ANN’s. The decision to use these specifically was the fact they represented two fairly different approaches that both have the ability to learn complex patterns in data. Given the time constraint that we had, we felt that it would be sufficient to demonstrate whether the current MOC model could potentially be updated to include other models or perhaps that entirely different approaches to oxide predictions in LIBS data should be persued.</p>
<p><strong>Table 5</strong> As you can see from the table XGBoost performed better in most cases and for some oxides even showed an improvement from the MOC model. Additionally, the ANN model also showed to be better than the MOC model in many cases. Given the results of our outlier removal experiments, despite them not being comprehensive, and the good results of XGBoost and ANN’s, perhaps the most improvements could be found with better model selection.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="conclusion" class="slide level2 smaller">
<h2>Conclusion</h2>
<div class="experiments-spacing">
<p class="experiments-header">
So what did we learn?
</p>
</div>
<div class="fragment fade-up">
<ul>
<li>Outlier removal is beneficial to some extend
<ul>
<li>Specialty approaches needs to be developed for further improvements</li>
</ul></li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li>Rethinking the choice of models may be a better solution
<ul>
<li>Current pipeline has a lot of complexity and moving parts</li>
</ul></li>
</ul>
</div>
<aside class="notes">
<p><strong>Outlier removal</strong> For the outlier removal we found that depending on the model, PLS-SM or ICA, outlier removal has varying success. For PLS-SM there seems to be neglible gains from outlier removal, while ICA benefits more from it. Generally, however, we determine that a “one size fits all” approach to outlier detection does not provide many benefits and perhaps different approaches needs to be developed. Such approaches could either involve entirely new algorithms or specialized approaches that account for the structure of data that mimics what an expert could do manually.</p>
<p><strong>Data preprocessing</strong></p>
<p><strong>Rethinking</strong> While the current setup with PLS and ICA allows for interpretability e.g.&nbsp;regression plots and independent components, the MOC model as a whole loses the benefit of that because of the complexity of the pipeline. This is because you are interleaving to different models that are operating in distinct ways and adjusting everything from data preprocessing to outlier removal introduces complexity with diminishing returns.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="reflections" class="slide level2 smaller">
<h2>Reflections</h2>
<div class="experiments-spacing">
<p class="experiments-header">
Taking a critical look at our project
</p>
</div>
<div class="fragment fade-up">
<ul>
<li>We accomplished most of what we wanted
<ul>
<li>Finished replica</li>
<li>Conducted meaningful experiments</li>
</ul></li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li>However… We lack depth in our experiments
<ul>
<li>For example:</li>
<li>Investigate the causes of varying RMSEs with aggregated datasets for ICA</li>
<li>Thorough investigation of ANNs and XGBoost and why exactly they perform better
<ul>
<li>Useful components that might be beneficial for future research</li>
</ul></li>
</ul></li>
</ul>
</div>
<aside class="notes">
<p>Reflecting on the project we achieved what we wanted on a general level. We completed a replica that is similar to Clegg et. al’s and demonstrated this fact with a t-test. We also managed to complete a set of experiments that helped us determine the effects on some of the components to the overall RMSE.</p>
<p>However, what we realize is that there was not a lot of depth to the experiments. We did not have the opportunity to spend nearly as much time as we would have liked to go into depth about the “why’s” of the results we saw.</p>
<p>For example, in the experiment with the aggregated datasets for ICA we saw mixed results across the different oxides. In some cases the RMSE improved, in others it did not. It would have been great to look more closely into the mechanisms that caused ICA to produce such results so that we could learn something from that. A second example is that we would have liked to have spent more time investigating the aspects of ANN and XGBoost that makes them so good for LIBS data. Understanding the specific components or mechanisms that make them produce such good results would have been tremendously useful and interesting.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="recommendations-for-future-work" class="slide level2">
<h2>Recommendations for Future Work</h2>
<div class="fragment fade-up">
<ul>
<li>Ensemble and advanced machine learning methods</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li>Advanced outlier detection techniques</li>
</ul>
</div>
<div class="fragment fade-up">
<ul>
<li>Dimensionality reduction techniques</li>
</ul>
</div>
<aside class="notes">
<p>Finally, we will finish off with looking at what could be done in the future.</p>
<p>In our report we suggest three avenues that could be explored based on what we have learned from our project.</p>
<p>The first is to explore ensemble and advanced machine learning methods. This idea stems from our own results from XGBoost and ANN’s, which showed to be able to handle the complexities of the LIBS data very well. Exploring ensemble techniques such as Random forest or gradient boosting as well as machine learning methods such as convolutional neural networks might offer advancements in the analysis of LIBS data. This notion is supported by papers such as supercam related paper that Patrick mentioned in the beginning.</p>
<p>The second avenue that could be explored is in the outlier detection domain. As I mentioned earlier, there might be benefits from exploring different or more advanced outlier detection methods. Exploring this avenue, potentially in conjunction with other prediction models, may yield results that could be beneficial for both existing Mars missions but also future ones.</p>
<p>The last suggestion that we give is to explore techniques that are based on dimensionality reduction such as PCA and Autoencoders to further simplify and improve the analysis. As you know, LIBS data is considered not only to be complex but also high dimensionality. This is why PLS and ICA are viable algorithms to consider in this context. This is because they are designed to reduce the dimensionality of the data without sacrificing the integrity of the data. Investigating new dimensionaly reduction techniques that could integrate with models that do not inherently do this, may yield interesting results as you may be able to leverage the strength of models that would otherwise not fit in the LIBS context.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="references" class="title-slide slide level1 smaller scrollable">
<h1>References</h1>

<div class="footer footer-default">

</div>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-andersonPostlandingMajorElement2022" class="csl-entry" role="listitem">
Anderson, Ryan B., Olivier Forni, Agnes Cousin, Roger C. Wiens, Samuel M. Clegg, Jens Frydenvang, Travis S. J. Gabriel, et al. 2022. <span>“Post-Landing Major Element Quantification Using <span>SuperCam</span> Laser Induced Breakdown Spectroscopy.”</span> <em>Spectrochimica Acta Part B: Atomic Spectroscopy</em> 188 (February): 106347. <a href="https://doi.org/10.1016/j.sab.2021.106347">https://doi.org/10.1016/j.sab.2021.106347</a>.
</div>
<div id="ref-bai_application_2023" class="csl-entry" role="listitem">
Bai, Hongchun, Ping Liu, Xiaohui Fu, Le Qiao, Changqing Liu, Yanqi Xin, and Zongcheng Ling. 2023. <span>“Application of Elastic Net in Quantitative Analysis of Major Elements Using Martian Laser-Induced Breakdown Spectroscopy Datasets.”</span> <em>Spectrochimica Acta Part B: Atomic Spectroscopy</em> 199 (January): 106587. <a href="https://doi.org/10.1016/j.sab.2022.106587">https://doi.org/10.1016/j.sab.2022.106587</a>.
</div>
<div id="ref-castorena_deep_2021" class="csl-entry" role="listitem">
Castorena, Juan, Diane Oyen, Ann Ollila, Carey Legett, and Nina Lanza. 2021. <span>“Deep Spectral CNN for Laser Induced Breakdown Spectroscopy.”</span> <em>Spectrochimica Acta Part B: Atomic Spectroscopy</em> 178 (April): 106125. <a href="https://doi.org/10.1016/j.sab.2021.106125">https://doi.org/10.1016/j.sab.2021.106125</a>.
</div>
<div id="ref-chen_xgboost_2016" class="csl-entry" role="listitem">
Chen, Tianqi, and Carlos Guestrin. 2016. <span>“<span>XGBoost</span>: A Scalable Tree Boosting System.”</span> In <em>Proceedings of the 22nd <span>ACM</span> <span>SIGKDD</span> International Conference on Knowledge Discovery and Data Mining</em>, 785–94. San Francisco California <span>USA</span>: <span>ACM</span>. <a href="https://doi.org/10.1145/2939672.2939785">https://doi.org/10.1145/2939672.2939785</a>.
</div>
<div id="ref-cleggRecalibrationMarsScience2017" class="csl-entry" role="listitem">
Clegg, Samuel M., Roger C. Wiens, Ryan Anderson, Olivier Forni, Jens Frydenvang, Jeremie Lasue, Agnes Cousin, et al. 2017. <span>“Recalibration of the <span>Mars Science Laboratory ChemCam</span> Instrument with an Expanded Geochemical Database.”</span> <em>Spectrochimica Acta Part B: Atomic Spectroscopy</em> 129 (March): 64–85. <a href="https://doi.org/10.1016/j.sab.2016.12.003">https://doi.org/10.1016/j.sab.2016.12.003</a>.
</div>
<div id="ref-dyar_effect_2021" class="csl-entry" role="listitem">
Dyar, M. Darby, and Cai R. Ytsma. 2021. <span>“Effect of Data Set Size on Geochemical Quantification Accuracy with Laser-Induced Breakdown Spectroscopy.”</span> <em>Spectrochimica Acta Part B: Atomic Spectroscopy</em> 177 (March): 106073. <a href="https://doi.org/10.1016/j.sab.2021.106073">https://doi.org/10.1016/j.sab.2021.106073</a>.
</div>
<div id="ref-lepore_quantitative_2022" class="csl-entry" role="listitem">
Lepore, Kate H., Caroline R. Ytsma, and M. Darby Dyar. 2022. <span>“Quantitative Prediction Accuracies Derived from Laser-Induced Breakdown Spectra Using Optimized Multivariate Submodels.”</span> <em>Spectrochimica Acta Part B: Atomic Spectroscopy</em> 191 (May): 106408. <a href="https://doi.org/10.1016/j.sab.2022.106408">https://doi.org/10.1016/j.sab.2022.106408</a>.
</div>
<div id="ref-takahashi_quantitative_2017" class="csl-entry" role="listitem">
Takahashi, Tomoko, and Blair Thornton. 2017. <span>“Quantitative Methods for Compensation of Matrix Effects and Self-Absorption in Laser Induced Breakdown Spectroscopy Signals of Solids.”</span> <em>Spectrochimica Acta Part B: Atomic Spectroscopy</em> 138 (December): 31–42. <a href="https://doi.org/10.1016/j.sab.2017.09.010">https://doi.org/10.1016/j.sab.2017.09.010</a>.
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 0.5,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'fast',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>